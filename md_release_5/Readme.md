# Комплекс конвейерной защиты.

Комплекс конвейерной защиты (металлодитектор в простонародье) разрабатывался инженерами ООО «Технорос» для установки на транспортных коммуникациях (в основном на конвейерах) промышленных компаний для обнаружения засоряющих элементов и выдачи управляющих сигналов на устройства извлечения или останова конвейера для организации ручного извлечения найденных фрагментов.
Засоряющими элементами являются металлические куски выше устанавливаемого размера. Это могут быть металлические куски как из т. н. магнитных, слабо магнитных и немагнитных сталей и сплавов. Последние особенно опасны, т. к. не реагируют на оборудование металоизвлечения предприятия, работающих на электромагнитном принципе.
Устройство таким образом предназначено для предотвращения:
* попадания в устройства измельчения (дробилки среднего и мелкого дробления) и, как следствие, избегать их поломок и дорогостоящего ремонта;
* порчи и/или сбоев в работе конвейерного оборудования (обрывы и/или порезы контейнерной ленты, засорение пересыпных бункеров, шиберов и т. п.)
* прокламаций со стороны покупателей о поставках некондиционного сырья и, как следствие аварий на оборудовании партнеров, вызванных наличием засоряющих элементов в поставляемом сырье.

## Основная программа управления оборудованием

Вычислительный модуль работает под управлением ОС Linux Ubuntu 10.04 LTE server.
ПО, выполняющее все вычислительные операции, формирование принятия решения и подачи сигналов управления представлено как данного репозитория [md_release_5](https://github.com/longway34/kkz/tree/main/md_release_5 "md_release_5"). Запускается при старте системы или в консольном режиме. 
Управление осуществляется:
* сигналами POSIX формата;
* с клавиатуры (в консольном режиме);
* командами [пользовательского интерфейса](https://github.com/longway34/kkz/tree/main/Web-07_1).
* обмен данными и командами с [интерфейсной программой](https://github.com/longway34/kkz/tree/main/web_release_5) осуществляется через общую область оперативной памяти.
* сбор данных от АЦП, в целях уменьшении время отклика программы, а так же из-за высой частоты работы АЦП (свыше 800кГц), идет через контроллер ПДП PCM-3362
* связь между ПР-200, ИП-320 и Advantech PCM-3362 организована по протоколу Modbus-RTU RS-485. 

## Состав управляемого оборудования

* Генератор прямоугольного электромагнитного сигнала в том числе передающей катушки излучения, монтируемой над транспортной (конвейерной) лентой, разработки ООО «Технорос».
* Комплекс приемных электромагнитных катушек, оснащенных предварительным усилителем, располагающихся под транспортной (конвейерной) лентой, разработки ООО «Технорос»
* Основной вычислительный комплекс, выполненный на базе Одноплатного компьютера формата PC/104-Plus Advantech PCM-3362

![Advantech PCM-3362](https://raw.githubusercontent.com/longway34/kkz/main/Common/demo_images/PCM-3362.png "Advantech PCM-3362")

в комплекте с АЦП RTD Embedded Technologies, Inc. DM-7520
![RTD Embedded Technologies, Inc. DM-7520](https://raw.githubusercontent.com/longway34/kkz/main/Common/demo_images/DM-7520.png "RTD Embedded Technologies, Inc. DM-7520")

---

* Устройство защиты оборудования от прохождения негабаритных фрагментов под управлением программируемого реле ОВЕН ПР-200

![ОВЕН ПР-200](https://raw.githubusercontent.com/longway34/kkz/main/Common/demo_images/PR-200.png "ОВЕН ПР-200")

Устройство защиты в своем составе снабжено набором датчиков движения ленты, прохождения негабарита, аварийным подъемным устройством, набором концевых выключателей, и т. п. ПР-200 дополнительно использовался для:
* управления т. н. светоуказательной рампой при организации ручной выборки обнаруженных фрагментов;
* включения в систему АСУТП, выступая в роли Mobsus-источника данных.

---

* Пульт местного управления, выполненный на базе панели ОВЕН ИП-320

![ОВЕН ИП-320](https://raw.githubusercontent.com/longway34/kkz/main/Common/demo_images/IP-320.jpg "ОВЕН ИП-320")

для вывода оперативной информации и изменения оперативных параметров работы оборудования. 

При написании (представленной демо-версии) были использованы следующие программные средства и библиотеки:
* С++, libc6-amd46 2.23-0ubuntu11.2;
* lbxml2, 2.9.3+dfsg1-1ubuntu0.7;
* libmodbus5, 3.0.6-1;
* применялась многопоточность libpthread-stubs0-dev, 0.3.4;
* драйверы устройства DM-7520, доработанные под спецификации ОС Linux Ubuntu;

---

Средство разработки.
Для разработки и представления данной демо-версии использовались:
* IDE:

![NetBeans](https://raw.githubusercontent.com/longway34/kkz/main/Common/demo_images/NetBeans.png "NetBeans")

* Среда разработки подготовлена с использованием:

![VirtualBox](https://raw.githubusercontent.com/longway34/kkz/main/Common/demo_images/VirtualBox.png "VirtualBox")
